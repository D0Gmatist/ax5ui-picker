<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <link rel="stylesheet" type="text/css" href="bower_components/bootstrap/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" type="text/css" href="bower_components/bootstrap-ax5mask/dist/ax5mask.css"/>
    <link rel="stylesheet" type="text/css" href="bower_components/bootstrap-ax5calendar/dist/ax5calendar.css"/>
    <link rel="stylesheet" href="bower_components/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="../dist/ax5picker.css"/>

    <script src="bower_components/jquery/dist/jquery.min.js"></script>
    <script src="bower_components/ax5core/dist/ax5core.js"></script>
    <script src="bower_components/bootstrap-ax5mask/dist/ax5mask.min.js"></script>
    <script src="bower_components/bootstrap-ax5calendar/dist/ax5calendar.js"></script>
    <script src="../dist/ax5picker.min.js"></script>
</head>
<body style="padding: 100px;">

<!--http://bootstrap-datepicker.readthedocs.org/en/latest/-->
<!--http://www.sitepoint.com/pure-css3-speech-bubbles/-->
<!--https://css-tricks.com/examples/ShapesOfCSS/-->
<!--https://css-tricks.com/clipping-masking-css/-->

<div class="form-group">

    <div class="input-group" data-ax5picker="date">
        <input type="text" class="form-control" placeholder="yyyy/mm/dd"/>
        <span class="input-group-addon">~</span>
        <input type="text" class="form-control" placeholder="yyyy/mm/dd"/>
        <span class="input-group-addon"><i class="fa fa-calendar-o"></i></span>
    </div>

    <br/>

    <div class="input-group" data-ax5picker="date">
        <input type="text" class="form-control" placeholder="yyyy/mm/dd"/>
        <span class="input-group-addon"><i class="fa fa-calendar-o"></i></span>
    </div>

    <br/>

    <div class="input-group" data-ax5picker="custom">
        <input type="text" class="form-control" placeholder="yyyy/mm/dd"/>
        <span class="input-group-addon"><i class="fa fa-calendar-o"></i></span>
    </div>

</div>

<script>
    var picker = new ax5.ui.picker();

    $(document.body).ready(function () {

        $('[data-ax5picker]').each(function (idx) {
            //console.log(this.getAttribute("data-ax5picker"));

            // picker body
            /**
             * date(date-range)
             * datetime
             * color
             *
             */

            if (this.getAttribute("data-ax5picker") == "date") {
                picker.bind({
                    id: "my-picker-" + idx,
                    target: this,
                    direction: "top",
                    content: {
                        width: 270,
                        margin: 10,
                        type: 'date',
                        config: {
                            control: {
                                left: '<i class="fa fa-chevron-left"></i>',
                                yearTmpl: '%s',
                                monthTmpl: '%s',
                                right: '<i class="fa fa-chevron-right"></i>'
                            },
                            lang: {
                                yearTmpl: "%s년",
                                months: ['01', '02', '03', '04', '05', '06', '07', '08', '09', '10', '11', '12'],
                                dayTmpl: "%s"
                            }
                        }
                    },
                    btns: {
                        today: {
                            label: "오늘", onClick: function () {
                                if (this.boundObject.inputLength == 1) {
                                    this.self.setContentValue(this.boundObject.id, 0, ax5.util.date(new Date(), {"return": "yyyy-mm-dd"}));
                                }
                                else {
                                    this.self.setContentValue(this.boundObject.id, 0, ax5.util.date(new Date(), {"return": "yyyy-mm-dd"}));
                                    this.self.setContentValue(this.boundObject.id, 1, ax5.util.date(new Date(), {"return": "yyyy-mm-dd"}));
                                    this.self.close();
                                }
                            }
                        },
                        thisMonth: {
                            label: "이번달 1일", onClick: function () {
                                var today = new Date();
                                if (this.boundObject.inputLength == 1) {
                                    this.self.setContentValue(this.boundObject.id, 0, ax5.util.date(today, {"return": "yyyy-mm-01"}));
                                }
                                else {
                                    this.self.setContentValue(this.boundObject.id, 0, ax5.util.date(today, {"return": "yyyy-mm-01"}));
                                    this.self.setContentValue(this.boundObject.id, 1, ax5.util.date(today, {"return": "yyyy-mm"}) + '-' + ax5.util.daysOfMonth(today.getFullYear(), today.getMonth()));
                                    this.self.close();
                                }
                            }
                        },
                        ok: {label: "확인", theme: "default"}
                    }
                });
            }
            else if (this.getAttribute("data-ax5picker") == "custom") {
                picker.bind({
                    target: this,
                    direction: "top",
                    contentWidth: 200,
                    content: function (callBack) {
                        var html = ''
                                + '가나다라마바사'
                                + '<div style="padding: 10px;">'
                                + '<button class="btn btn-default">기능 1</button>'
                                + '</div>'
                            ;
                        callBack(html);
                    }
                });
            }

            // todo : input에 formatter 적용

        });

        // 외부에서 피커 오픈하기
        // picker.open('my-picker-0');
    });
</script>

</body>
</html>