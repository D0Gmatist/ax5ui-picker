"use strict";!function(t,i){var e=ax5.util,n=function(){var t,n=this;i&&i.call(this),this.queue=[],this.config={clickEventName:"click",theme:"default",width:300,title:"",lang:{ok:"ok",cancel:"cancel"},animateTime:250},this.config.btns={ok:{label:this.config.lang.ok,theme:this.config.theme}},this.activePicker=null,t=this.config,this.init=function(){},this.bind=function(i){var n={};return jQuery.extend(!0,n,t),i&&jQuery.extend(!0,n,i),i=n,i.target?(i.$target=jQuery(i.target),i.id||(i.id="ax5-picker-"+ax5.getGuid()),-1===e.search(this.queue,function(){return this.id==i.id})&&(this.queue.push(i),this.bindPickerTarget(i,this.queue.length-1)),this):(console.log(ax5.info.getError("ax5picker","401","bind")),this)},this.bindPickerTarget=function(){var t={focus:function(t,i,e){this.open(t,i)},click:function(t,i,e){this.open(t,i)}},i={"@fn":function(t,i){var e={};t.$target.find('input[type="text"]').length;t.content.config&&jQuery.extend(!0,e,t.content.config),this.queue[i]=jQuery.extend(!0,this.queue[i],e)},date:function(t,i){var e={},n=t.$target.find('input[type="text"]').length;e=1==n?{width:300}:{width:300*n},t.content.config&&jQuery.extend(!0,e,t.content.config),this.queue[i]=jQuery.extend(!0,this.queue[i],e)}};return function(n,c){if(!n.content)return console.log(ax5.info.getError("ax5picker","501","bind")),this;if(e.isFunction(n.content))i["@fn"].call(this,n,c);else for(var r in i)if(n.content.type==r){i[r].call(this,n,c);break}return n.$target.find('input[type="text"]').unbind("focus.ax5picker").bind("focus.ax5picker",t.focus.bind(this,n,c)),n.$target.find(".input-group-addon").unbind("click.ax5picker").bind("click.ax5picker",t.click.bind(this,n,c)),this}}(),this.getTmpl=function(t,i){return'\n            <div class="ax5-ui-picker {{theme}}" id="{{id}}">\n                {{#title}}\n                    <div class="ax-picker-heading">{{title}}</div>\n                {{/title}}\n                <div class="ax-picker-body">\n                    <div class="ax-picker-contents" data-modal-els="contents" style="width:{{width}}px;height:{{height}}px;"></div>\n                    {{#btns}}\n                        <div class="ax-picker-buttons">\n                        {{#btns}}\n                            {{#@each}}\n                            <button data-ax-picker-btn="{{@key}}" class="btn btn-default {{@value.theme}}">{{@value.label}}</button>\n                            {{/@each}}\n                        {{/btns}}\n                        </div>\n                    {{/btns}}\n                </div>\n                <div class="ax-picker-arrow"></div>\n            </div>\n            '},this.open=function(){return function(t,i){return this.activePicker?this:(this.activePicker=jQuery(ax5.mustache.render(this.getTmpl(t,i),t)),this.alignPicker(t,i,"append"),jQuery(window).bind("resize.ax5picker",function(){n.alignPicker(t,i)}),this)}}(),this.close=function(){jQuery(window).unbind("resize.ax5picker")},this.alignPicker=function(t,i,e){var n={},c={};e&&jQuery(document.body).append(this.activePicker),n=t.$target.offset(),c={width:t.$target.outerWidth(),height:t.$target.outerHeight()},t.direction&&""!==t.direction&&"auto"!==t.direction||(t.direction="top"),e&&this.activePicker.addClass("direction-"+t.direction),this.activePicker.css(function(){return"top"==t.direction?{left:n.left+c.width/2-this.activePicker.outerWidth()/2,top:n.top+c.height+12}:"bottom"==t.direction?{left:n.left+c.width/2-this.activePicker.outerWidth()/2,top:n.top-this.activePicker.outerHeight()-12}:"left"==t.direction?{left:n.left+c.width+12,top:n.top-c.height/2}:"right"==t.direction?{left:n.left-this.activePicker.outerWidth()-12,top:n.top-c.height/2}:void 0}.call(this))},this.main=function(){arguments&&e.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};t.picker=function(){return e.isFunction(i)&&(n.prototype=new i),n}()}(ax5.ui,ax5.ui.root);